{{ 'component-custom-faq.css' | asset_url | stylesheet_tag }}

<section class="custom-faq section-padding--md-bottom full-width" id="custom-faq-{{ section.id }}">
  <div class="container-xl g-5">
    {% if section.settings.heading != blank %}
      <h2 class="custom-faq__heading heading-style-h3">{{ section.settings.heading }}</h2>
    {% endif %}

    <div class="custom-faq__accordion">
      <div class="accordion accordion-flush" id="FaqAccordion-{{ section.id }}">
        {% for block in section.blocks %}
          {% assign item_id = 'FaqItem-' | append: section.id | append: '-' | append: block.id %}
          {% assign collapse_id = 'FaqCollapse-' | append: section.id | append: '-' | append: block.id %}
          {% assign index_number = forloop.index | prepend: '0' %}
          <div class="accordion-item custom-faq__item" {{ block.shopify_attributes }}>
            <h3 class="accordion-header" id="{{ item_id }}">
              <button
                class="accordion-button collapsed custom-faq__button"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#{{ collapse_id }}"
                aria-expanded="false"
                aria-controls="{{ collapse_id }}"
              >
                <span class="custom-faq__index">{{ index_number }}</span>
                <span class="custom-faq__question heading-style-h5">{{ block.settings.question }}</span>
                <span class="custom-faq__icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                    <path
                      d="M12 5v14M5 12h14"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="square"
                    />
                  </svg>
                </span>
              </button>
            </h3>
            <div
              id="{{ collapse_id }}"
              class="accordion-collapse collapse"
              aria-labelledby="{{ item_id }}"
              data-bs-parent="#FaqAccordion-{{ section.id }}"
            >
              <div class="accordion-body custom-faq__answer">
                {{ block.settings.answer }}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Custom FAQ",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "FAQs"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "FAQ item",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "What makes this product special?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>Add your answer here.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom FAQ"
    }
  ]
}
{% endschema %}
